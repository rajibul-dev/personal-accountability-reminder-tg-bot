# fly.toml app configuration file for personal-accountability-reminder-tg-bot

app = 'personal-accountability-reminder-tg-bot'
primary_region = 'bom'

[build]

[env]
  NODE_ENV = "production"
  TZ = "Asia/Kolkata"

# optional: remove http_service since you're not using a web port
[http_service]
  internal_port = 3000
  force_https = true
  auto_stop_machines = false  # ðŸš« don't auto-suspend, we need cron alive
  auto_start_machines = true  # can stay true, harmless
  min_machines_running = 1    # âœ… always keep 1 running
  processes = ['app']

[[vm]]
  size = 'shared-cpu-1x'

[deploy]
  strategy = "immediate"       # ðŸš€ prevents spawning 2 machines
  min_machines_running = 1     # âœ… ensures exactly 1 stays up
